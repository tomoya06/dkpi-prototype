## 引言

### 研究背景

物联网（The Internet of Things, IoT）技术在现实世界的应用非常广泛，并呈现出爆炸式增长的态势，智能设备的自主交互将成为未来智能系统的核心应用技术。据估计，在未来四年内将有逾10亿新的智能设备上线、相互传输超过44ZB（Zettabyte, 1ZB=10^21bytes）的数据[1]。

如此大规模的设备网络也促使人们寻找一种更安全、更快速的方案来完成物联网设备的识别、交互、数据传输等任务[4]。物联网设备的识别依靠的是每台设备独一无二的数字身份，设备间的交互和数据传输都基于每台设备独有的数字身份来完成，所以对一个物联网体系而言，如何管理和维护设备的数字身份，就是衡量这个平台安全性的关键因素。

当今的物联网设备大多依托中心化的系统来完成数字身份的管理，例如我们将在后面介绍的阿里云物联网平台。中心化物联网系统提供的解决方案是：由系统中心、即某一物联网平台的运营团体，来统一负责物联网设备数字身份的管理，比如身份签发、验证、撤销、存储等，设备的操作指令和事件监听的定义需事先在平台上注册，设备之间的信息交互都由该平台的信息服务器来中转。总体来说，整个体系是高度中心化的，使用该平台的所有设备，几乎每一步的交互操作都会有平台中心的介入，也就是有第三方的介入。

中心化物联网体系的优势有很多，成熟的物联网平台能提供更安全、更稳定的网络服务；对于常见的物联网应用场景，平台会提供方便的开发工具和模板，减少重复“造轮子”的工作量，提高开发效率。但弊端固然存在，其中最大的弊端在于，设备之间发送的所有信息实际上都经过了物联网平台服务器的中转，在信息敏感度较高的场景下，如涉及到货币交易、个人信息的场景，用户并非都能安心将自己的信息暴露给第三方；另外在一些流程较为复杂的场景，开发者更希望能对物联网的数字身份有更深度的控制权限，例如给每个数字身份绑定更丰富的信息，但在中心化的物联网身份管理体系下，数字身份相关的操作都是封装起来的，开发者无法自行控制身份管理相关的操作，每次只能向中心服务器询问、等待服务器的应答，更没有能力对数字身份添加其他信息。此外，随着物联网设备应用规模的急剧增大，中心化系统的承载能力、防灾能力也将受到极大考验。因此，物联网开发者们开始寻求去中心化的数字身份管理方案。

区块链是一种能保证自身数据不可篡改的串联数据结构。2009年中本聪创建的比特币网络是对区块链的第一次大规模应用。比特币网络是一种去中心化的网络体系，实际上是一个P2P网络。每个参与该网络的设备称为一个节点，节点之间使用”比特币“这一虚拟货币进行交易。每个节点都持有一套“账本”，记录着节点之间的所有交易记录，而这个所谓“账本”就是使用区块链存储的数据记录。区块链特殊的数据结构设计能保证所有节点持有的账本内容均一致，并且可以永久查询其中任意一笔交易信息。

比特币以及一众基于区块链实现的去中心化项目，让物联网开发者开始考虑使用区块链技术来实现去中心化物联网平台的可能性。区块链这一数据结构能有效保证数字身份存储的安全性，通过在区块链网络上部署智能合约，可以让每个节点都有识别身份、操作自身身份内容的能力，而无需中心化服务器的干预。所以从理论上，使用区块链技术来实现一个安全、高效的去中心化数字身份管理体系，是完全可行的。

### 研究现状

目前已经有不少基于区块链技术实现的物联网方案，不过每个方案的侧重点都有所不同。综合分析各篇文献中的实现方案，在设计和实现的过程中需要关注的问题主要包括以下几个方面：

* 网络协议的选择：物联网常用的网络协议与互联网中常用的协议有所不同，需要根据应用场景、设备性能、并结合后续网络拓扑的设计和节点交互设计，来综合考虑选用何种网络协议；
* 网络拓扑结构的设计：根据设计方案中预期的设备规模、设备类型来确定选用何种网络拓扑结构，或是根据所选的网络协议、设备性能和功能来将不同设备划分层级，以此高效组织网络中的所有设备；
* 节点之间数据交互的逻辑设计：这一点主要与所选用的网络协议相关，例如使用MQTT协议，节点之间的数据交互是基于发布/订阅范式，也就意味着在两个节点之间还要引入一个中介(Broker)，来完成数据转发；或是经典的HTTP协议，节点之间可以直接收发数据；
* 共识协议的选用：选用合适的共识协议可以有效保障当前去中心网络中各项决策的有效性，也有利于提高决策通过的效率；
* 智能合约的设计：作为区块链读写的媒介，并且为区块链中的数据赋予实际含义；
* 智能设备的身份分配和鉴定：设备在进行信息交互之前都要互相鉴定对方的数字身份，数字身份的分配规则和鉴定流程就成为了整套方案的安全基础。


